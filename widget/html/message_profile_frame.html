<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" name="viewport"/>
        <meta content="telephone=no,email=no,date=no,address=no" name="format-detection"/>
        <title>
        </title>
        <link href="../css/api.css" rel="stylesheet" type="text/css"/>
        <style type="text/css">
            html,body{
                width:100%;
	        	background-color: transparent;
	        }
            .message_profile{
                width:100%;
                overflow: hidden;
            }
            .message_box{
                width:300%;
                margin-left: -82.06%;
                overflow: hidden;
            }
            .message{
                float: left;
	            height: 70px;
	            width: 27.573333333%;
                margin:0 0.87999999%;
	            background-color: #fff;
	            box-shadow: 0 2px 5px -1px #ccc;
                position: relative;
	        }
            .left{
                box-sizing: border-box; 
                position: absolute;
                top:0;
                left:0;
                height: 100%;
                width: 90px;
                padding: 10px 10px 10px 20px;
            }
            .left .profile_img{
                width: 56px;
                height: 50px;
                background: url(../image/logo.png) no-repeat center center;
                background-size: auto 25px;
                box-shadow: 0 1px 5px -1px #ccc;
            }
            .content{
                margin-left: 90px;
                padding: 12px 6px;
            }
            .content h2{
                font-size: 14px;
                line-height: 24px;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }
            .content p{
                font-size: 12px;
                height: 18px;
                line-height: 18px;
                color: #828282;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }
            .active{
                background-color: #f5f5f5;
            }


        </style>
    </head>
    <body>
        <div class="message_profile">
            <div class="message_box">
                <div class="message" tapmode="active" onclick="openMessageDetail()">
                    <div class="left">
                        <div class="profile_img"></div>
                    </div>
                    <div class="content">
                        <h2 class="topic">主题</h2>
                        <p class="content">活动内容...</p>
                    </div>
                </div>
                <div class="message" tapmode="active" onclick="openMessageDetail()">
                    <div class="left">
                        <div class="profile_img"></div>
                    </div>
                    <div class="content">
                        <h2 id="topic">主题</h2>
                        <p id="content">活动内容...</p>
                    </div>
                </div>
                <div class="message" tapmode="active" onclick="openMessageDetail()">
                    <div class="left">
                        <div class="profile_img"></div>
                    </div>
                    <div class="content">
                        <h2 class="topic">主题</h2>
                        <p class="content" ="content">活动内容...</p>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script src="../script/api.js" type="text/javascript"></script>
    <script type="text/javascript">
        var message,messageId,userName,topic,content;
        apiready = function(){
            topic=$api.byId('topic');
            content=$api.byId('content');
            message=$api.dom(".message");
            changeMessageListener();
        };
        function changeMessageListener(){
            api.addEventListener({
                name: 'changeMessage'
            }, function(ret, err) {
                if (ret) {
                    var newret=ret.value.option;
                    $api.attr(message, 'id',newret.listId);
                    $api.text(topic, newret.topic);
                    $api.text(content, newret.content);
                }
            });
        }    
        function openMessageDetail(){
            messageId=$api.attr(message, 'id');
            api.openWin({
                name: 'message_detail',
                url: './message_detail.html',
                animation:{
                    type:'movein',
                    subType :'from_bottom'
                },
                pageParam: {
                    id: messageId
                }
            });
        };
        
    </script>
</html>